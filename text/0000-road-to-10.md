- Feature Name: road-to-1.0
- Start Date: 2019-09-11
- RFC PR: (leave this empty)
- Volta Issue: (leave this empty)

# Summary
[summary]: #summary

Document the features necessary to release Volta 1.0

# Motivation
[motivation]: #motivation

## Volta for Engineers

The goal of Volta is to empower developers to build amazing JS applications without having to worry about their environment or tooling. Volta manages your tools so you don't have to worry about which version will be called when you run a command.

To support this goal, the remaining work on the path to Volta 1.0 involves smoothing out some sharp edges in common workflows. Volta should be unobtrusive, we want you to be focused on your own work, not on details about your local development environment.


## Volta for Teams

As part of empowering engineers to focus on their work, Volta allows teams to centralize their infrastructure decision-making without slowing down the individual team members. If the team decides to change versions of Node for a project, that shouldn't require explicit effort on the part of each developer.

Volta 1.0 will also include more granular ways to control the environment, so that the benefits can scale to any size team without friction. Volta should work for large projects with hundreds of developers just as well as it works for a small team with only a handful.

# Details
[details]: #details

Features that are important to meet the goals we have for Volta 1.0:

## Upgrades

Implement a method for updating Volta, so that users can easily stay up-to-date. See https://github.com/volta-cli/rfcs/pull/37 for a more in-depth discussion of this feature.

## `npm link` / `yarn link`

When developing and testing the interaction of Node packages, `npm link` / `yarn link` are often used to allow one project to depend on a local version of another project. Unfortunately, the current behavior with Volta is unspecified. It works if you use `yarn link` and both projects are using the exact same version of Yarn. We should work out the story so that users can `link` between projects that use completely different Node / Yarn versions. See https://github.com/volta-cli/volta/issues/56

## Monorepos / Yarn Workspaces

Currently, Volta only looks at the first `package.json` it finds as the root of a project and stops looking at that point. This works for single-project repositories, but for monorepos (including with Yarn workspaces), it would make sense to support pinning Node / Yarn at a higher level. We should allow some method of specifying that a project inherits its platform from a different `package.json` to better support that workflow. See https://github.com/volta-cli/volta/issues/378

## Installing / Pinning npm

We currently don't support Pinning or Installing a different version of `npm` than comes bundled with Node. This can be an issue at times, because some versions of Node shipped with a broken `npm`, forcing users to upgrade their Node if they want to change `npm` versions. Since we support pinning Yarn independent of the Node version, we should do the same for npm. See https://github.com/volta-cli/volta/issues/292

## Run Command

For advanced or debugging use-cases, we should support a `volta run` command that allows users to specify the versions of Node, npm, and Yarn to use at the command line. This will allow users to override the platform detected by Volta, in cases where they explicitly want to pick a different version of Node. See https://github.com/volta-cli/volta/issues/546

## Documentation

As part of working towards 1.0, we should do a pass on our documentation and make sure that everything is up-to-date and accurate. We should also make sure that there aren't any major features that are missing documentation. This will improve the onboarding experience and allow new users to more easily discover how they can use Volta.

## Miscellaneous Polish

There are a number of issues that are relatively small on their own, but combined represent a significant amount of work. Each of them represents polish that will make Volta more delightful to use. For example (not an exhaustive list):

* https://github.com/volta-cli/volta/issues/535
* https://github.com/volta-cli/volta/issues/523
* https://github.com/volta-cli/volta/issues/509
* https://github.com/volta-cli/volta/issues/495
* https://github.com/volta-cli/volta/issues/425

# Critique
[critique]: #critique

## Yarn Plug'n'Play

A feature that could be considered for 1.0 is support for Yarn Plug'n'Play, which installs all of the dependencies from a local cache and doesn't use `node_modules`. However, we haven't yet received requests to support that functionality, and it will require a fair amount of investigation on the implementation. One major issue is that Yarn's feature relies on JS Monkeypatching, which we can't take advantage of in Rust, so we would need to either call Node (which will have performance implications) or duplicate the Yarn logic within Volta (which will take significant development effort).

## Shared Global Installs

A few Node tools (e.g. `yeoman` and `ts-node`) rely on global installs of packages that can be `require()`d in themselves, in order to allow for peer-dependencies or plugin-style architectures. Those projects don't currently work under Volta, since each tool installed with `volta install` is sandboxed and called without knowledge of the other tools. Additionally, there is a class of tools that don't use `require()`, but instead call out to other global tools directly, which expect a shared environment. We could support these use-cases in 1.0, however they seem to be relatively limited and not wide-spread. Given that the impact is lower since most tools don't operate in this manner, it seems reasonable that we don't require a fix as part of Volta 1.0.

# Unresolved questions
[unresolved]: #unresolved-questions

- Are there any other issues / features that are important enough to be necessary for the 1.0 release?
